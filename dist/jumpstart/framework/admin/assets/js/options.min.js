/**
 * Options System
 *
 * @package Jump_Start
 * @subpackage Theme_Blvd
 * @license GPL-2.0+
 */
window.themeblvd.options={},function(e,t,i){e("body");t.options.setup=function(t){var n=e(t);n.find(".tb-fancy-select").each(function(){var t=e(this),i=t.find("select").val(),n=t.find('option[value="'+i+'"]').text();t.find(".textbox").text(n)}),n.find(".show-hide").each(function(){var t=e(this);t.children(".trigger").find("input").is(":checked")?t.children(".receiver").show():(t.find(".receiver").each(function(){e(this).find("input, textarea, select").prop("disabled",!0)}),t.children(".receiver").hide())}),n.find(".show-hide-toggle").each(function(){var t=e(this),i=t.children(".trigger"),n="";n=i.hasClass("section-radio")?i.find(".of-radio:checked").val():i.find(".of-input").val(),t.children(".receiver").each(function(){e(this).hide().find("input, textarea, select").prop("disabled",!0)}),t.children(".receiver-"+n).each(function(){e(this).show().find("input, textarea, select").prop("disabled",!1)})}),n.find(".desc-toggle").each(function(){var t=e(this),i=t.children(".trigger").find(".of-input").val();t.find(".desc-receiver .explain").hide(),t.find(".desc-receiver .explain."+i).show()}),n.find(".section-content").each(function(){var t=e(this),i=t.find(".column-content-types select.select-type").val();t.find(".column-content-type").hide(),t.find(".column-content-type-"+i).show()}),n.find(".columns").each(function(){var t=e(this),i=t.find(".select-col-num").val();i>1?(t.find(".select-wrap-grid").show(),t.find(".section-column_widths").show(),t.closest(".widget-content").find(".column-height").show()):(t.find(".select-wrap-grid").hide(),t.find(".section-column_widths").hide(),t.closest(".widget-content").find(".column-height").hide()),t.find(".section-content").hide();for(var n=1;n<=i;n++)t.find(".col_"+n).show()}),n.find(".section-logo").each(function(){var t=e(this),i=t.find(".select-type select").val();t.find(".logo-item").hide(),t.find("."+i).show()}),n.find(".section-typography .of-typography-face").each(function(){var t=e(this);t.closest(".section-typography").find(".google-font").hide(),t.closest(".section-typography").find(".typekit-font").hide(),t.closest(".section-typography").find("."+t.val()+"-font").fadeIn("fast")}),n.find(".of-radio-img-label").hide(),n.find(".of-radio-img-img").show(),n.find(".of-radio-img-radio").hide(),n.find(".select-parallax").each(function(){var t=e(this);"parallax"===t.find(".of-background-attachment").val()?(t.find(".of-background-repeat").closest(".tb-fancy-select").hide(),t.find(".of-background-position").closest(".tb-fancy-select").hide(),t.find(".of-background-size").closest(".tb-fancy-select").hide(),t.find(".parallax").show()):(t.find(".of-background-repeat").closest(".tb-fancy-select").show(),t.find(".of-background-position").closest(".tb-fancy-select").show(),t.find(".of-background-size").closest(".tb-fancy-select").show(),t.find(".parallax").hide())}),n.find(".of-background-properties").each(function(){var t=e(this),i=t.find(".of-background-repeat").val(),n=t.find(".of-background-attachment").val();"no-repeat"===i&&"parallax"!==n?t.find(".of-background-size").closest(".tb-fancy-select").show():t.find(".of-background-size").closest(".tb-fancy-select").hide()}),e.isFunction(e.fn.slider)&&n.find(".jquery-ui-slider").each(function(){var t=e(this),i=t.closest(".jquery-ui-slider-wrap").find(".slider-input"),n=t.data("units");t.slider({min:t.data("min"),max:t.data("max"),step:t.data("step"),value:parseInt(i.val()),create:function(e,n){t.find(".ui-slider-handle").append('<span class="display-value"><span class="display-value-text"></span><span class="display-value-arrow"></span></span>');var o=t.find(".display-value");o.css("margin-left","-"+o.outerWidth()/2+"px"),o.find(".display-value-text").text(i.val())},slide:function(e,o){i.val(o.value+n),t.find(".display-value-text").text(o.value+n)}})}),e.isFunction(e.fn.wpColorPicker)&&n.find(".tb-color-picker").wpColorPicker({change:function(t,i){e(t.target).trigger("themeblvd-color-change")}}),e.isFunction(e.fn.wpColorPicker)&&n.find(".section-button").each(function(){var t=e(this);t.find(".color-picker").wpColorPicker(),t.find(".color.bg .wp-color-result").attr("title",i.bg_color),t.find(".color.bg_hover .wp-color-result").attr("title",i.bg_color_hover),t.find(".color.border .wp-color-result").attr("title",i.border_color),t.find(".color.text .wp-color-result").attr("title",i.text_color),t.find(".color.text_hover .wp-color-result").attr("title",i.text_color_hover),t.find(".include.bg input").is(":checked")&&t.find(".color.bg").show(),t.find(".include.border input").is(":checked")&&t.find(".color.border").show()}),n.find(".tb-input-icon-link").themeblvd("modal",null,{build:!1,padding:!0,size:"custom",onDisplay:function(e){var t=e.$elem,i=e.$modal_window,n=t.closest(".input-wrap").find("input").val();i.find(".media-frame-content").scrollTop(0),i.find(".select-icon").removeClass("selected"),i.find(".media-toolbar-secondary").find(".fa, span, img").remove(),i.find('[data-icon="'+n+'"]').length>0&&(i.find('[data-icon="'+n+'"]').addClass("selected"),i.find(".icon-selection").val(n),i.find(".media-toolbar-secondary").append('<i class="fa fa-'+n+' fa-2x fa-fw"></i><span>'+n+"</span>"))},onSave:function(e){var t=e.$modal_window.find(".icon-selection").val();e.$elem.closest(".input-wrap").find("input").val(t)}}),n.find(".tb-input-post-id-link").themeblvd("modal",null,{build:!1,padding:!0,button:"",size:"custom",onDisplay:function(t){var i=t.$elem,n=t.$modal_window;n.find("#search-submit").off("click.tb-search-posts"),n.find("#search-submit").on("click.tb-search-posts",function(t){t.preventDefault();var i=e(this).closest(".post-browser-head"),o={action:"themeblvd_post_browser",data:i.find("#post-search-input").val()};i.find(".tb-loader").fadeIn(200),e.post(ajaxurl,o,function(e){n.find(".ajax-mitt").html("").append(e),i.find(".tb-loader").fadeOut(200)})}),n.off("click.tb-select-post",".select-post"),n.on("click.tb-select-post",".select-post",function(o){o.preventDefault(),n.find("#post-search-input").val(""),n.find(".ajax-mitt").html(""),i.closest(".input-wrap").find(".of-input").val(e(this).data("post-id")),t.close()})},onCancel:function(e){$browser=e.$modal_window,$browser.find("#post-search-input").val(""),$browser.find(".ajax-mitt").html("")}}),n.find(".tb-texture-browser-link").themeblvd("modal",null,{build:!1,padding:!0,size:"custom",onDisplay:function(t){var i=t.$elem,n=t.$modal_window,o=i.closest(".controls").find(".of-input").val();n.find(".media-frame-content").scrollTop(0),n.find(".select-texture").each(function(){$link=e(this),$link.removeClass("selected"),o===$link.data("texture")&&($link.addClass("selected"),n.find(".texture-selection").val($link.data("texture")),n.find(".current-texture").text($link.data("texture-name")))})},onSave:function(e){var t=e.$elem.closest(".controls").find(".of-input"),i=e.$modal_window.find(".texture-selection").val();t.val(i),t.closest(".tb-fancy-select").find(".textbox").text(t.find('option[value="'+i+'"]').text())}}),n.find("#tb-footer-sync").is(":checked")?(n.find(".standard-footer-setup").hide(),n.find(".footer-template-setup").show()):(n.find(".standard-footer-setup").show(),n.find(".footer-template-setup").hide())}}(jQuery,window.themeblvd,themeblvdL10n),function(e,t){var i=e("body");t.options.bind=function(n){var o=e(n);o.on("change",".tb-fancy-select select",function(){var t=e(this),i=t.val(),n=t.find('option[value="'+i+'"]').text();t.closest(".tb-fancy-select").find(".textbox").text(n)}),o.find(".tb-modal-link").themeblvd("modal"),t.isMobile(i)||(o.on("mouseenter",".tb-tooltip-link",function(){var t=e(this),n=t.data("tooltip-position"),o=t.offset().left,a=t.offset().top,d=t.data("tooltip-text"),s='<div class="themeblvd-tooltip %position%"> \t\t\t\t\t\t\t\t   <div class="tooltip-inner"> \t\t\t\t\t\t\t\t\t %text% \t\t\t\t\t\t\t\t   </div> \t\t\t\t\t\t\t\t   <div class="tooltip-arrow"></div> \t\t\t\t\t\t\t\t</div>';!d&&t.data("tooltip-toggle")&&(d=t.data("tooltip-text-"+t.data("tooltip-toggle"))),d||(d=t.attr("title")),n||(n="top"),s=(s=s.replace("%position%",n)).replace("%text%",d),i.append(s);var l=e(".themeblvd-tooltip"),c=l.outerHeight(),r=l.outerWidth();switch(n){case"left":o=o-r-5,a+=.5*t.outerHeight(),a-=c/2;break;case"right":o=o+t.outerWidth()+5,a+=.5*t.outerHeight(),a-=c/2;break;case"bottom":o+=.5*t.outerWidth(),o-=r/2,a=a+t.outerHeight()+2;break;case"top":default:o+=.5*t.outerWidth(),o-=r/2,a=a-c-2}l.css({top:a+"px",left:o+"px"}).addClass("fade in")}),o.on("mouseleave",".tb-tooltip-link",function(){e(".themeblvd-tooltip").remove()}),o.find(".tb-tooltip-link").on("click",function(){var t=e(this),i=t.data("tooltip-toggle");e(".themeblvd-tooltip").remove(),2==i?t.data("tooltip-toggle",1):t.data("tooltip-toggle",2)})),o.on("click",".show-hide > .trigger input",function(){var t=e(this);t.is(":checked")?(t.closest(".show-hide").find(".receiver").each(function(){e(this).find("input, textarea, select").prop("disabled",!1)}),t.closest(".show-hide").children(".receiver").fadeIn("fast")):(t.closest(".show-hide").find(".receiver").each(function(){e(this).find("input, textarea, select").prop("disabled",!0)}),t.closest(".show-hide").children(".receiver").hide())}),o.on("change",".show-hide-toggle > .trigger select.of-input",function(){var t=e(this),i=t.val(),n=t.closest(".show-hide-toggle");n.children(".receiver").each(function(){e(this).hide().find("input, textarea, select").prop("disabled",!0)}),n.children(".receiver-"+i).each(function(){e(this).show().find("input, textarea, select").prop("disabled",!1)})}),o.on("click",".show-hide-toggle > .trigger .of-radio",function(){var t=e(this),i=t.val(),n=t.closest(".show-hide-toggle");n.children(".receiver").each(function(){e(this).hide().find("input, textarea, select").prop("disabled",!0)}),n.children(".receiver-"+i).each(function(){e(this).show().find("input, textarea, select").prop("disabled",!1)})}),o.on("change",".desc-toggle > .trigger .of-input",function(){var t=e(this),i=t.val(),n=t.closest(".desc-toggle");n.find(".desc-receiver .explain").hide(),n.find(".desc-receiver .explain."+i).show()}),o.on("change",".column-content-types select.select-type",function(){var t=e(this),i=t.closest(".section-content"),n=t.val();i.find(".column-content-type").hide(),i.find(".column-content-type-"+n).show()}),o.on("change",".select-col-num",function(){var t=e(this),i=t.val(),n=t.closest(".columns");i>1?(n.find(".select-wrap-grid").show(),n.find(".section-column_widths").show(),n.closest(".widget-content").find(".column-height").show()):(n.find(".select-wrap-grid").hide(),n.find(".section-column_widths").hide(),n.closest(".widget-content").find(".column-height").hide()),n.find(".section-content").hide();for(var o=1;o<=i;o++)n.find(".col_"+o).show()}),o.on("change",".section-logo .select-type select",function(){var t=e(this),i=t.closest(".section-logo"),n=t.val();i.find(".logo-item").hide(),i.find("."+n).show()}),o.on("change",".section-typography .of-typography-face",function(){var t=e(this);t.closest(".section-typography").find(".google-font").hide(),t.closest(".section-typography").find(".typekit-font").hide(),t.closest(".section-typography").find("."+t.val()+"-font").fadeIn("fast")}),o.find(".of-radio-img-img").on("click",function(t){t.preventDefault();var i=e(this);i.parent().parent().find(".of-radio-img-img").removeClass("of-radio-img-selected"),i.addClass("of-radio-img-selected")}),o.on("click",".select-categories input",function(){var t=e(this),i=t.closest(".controls");t.prop("checked")&&(t.hasClass("all")?i.find("input").each(function(){var t=e(this);t.hasClass("all")||t.prop("checked",!1)}):i.find("input.all").prop("checked",!1))}),o.on("change",".select-parallax .of-background-attachment",function(){var t=e(this),i=t.closest(".select-parallax");"parallax"==t.val()?(i.find(".of-background-repeat").closest(".tb-fancy-select").hide(),i.find(".of-background-position").closest(".tb-fancy-select").hide(),i.find(".of-background-size").closest(".tb-fancy-select").hide(),i.find(".parallax").show()):(i.find(".of-background-repeat").closest(".tb-fancy-select").show(),i.find(".of-background-position").closest(".tb-fancy-select").show(),i.find(".of-background-size").closest(".tb-fancy-select").show(),i.find(".parallax").hide())}),o.on("change",".of-background-properties .of-background-repeat",function(){var t=e(this),i=t.closest(".of-background-properties"),n=t.val(),o=i.find(".of-background-attachment").val();"no-repeat"===n&&"parallax"!==o?i.find(".of-background-size").closest(".tb-fancy-select").show():i.find(".of-background-size").closest(".tb-fancy-select").hide()}),o.on("click",".section-button .include input",function(){var t=e(this),i="bg";t.closest(".include").hasClass("border")&&(i="border"),t.is(":checked")?t.closest(".section-button").find(".color."+i).show():t.closest(".section-button").find(".color."+i).hide()}),o.find("#tb-footer-sync").on("click",function(){e(this).is(":checked")?($this.find(".standard-footer-setup").hide(),$this.find(".footer-template-setup").show()):($this.find(".standard-footer-setup").show(),$this.find(".footer-template-setup").hide())}),"object"==typeof google&&"object"==typeof google.maps&&o.on("click",".section-geo .geo-insert-lat-long",function(i){i.preventDefault();var n=e(this),o=n.closest(".geo-generate").find(".overlay"),a=new google.maps.Geocoder,d=n.prev(".address").val(),s="0",l="0";o.fadeIn(100),a.geocode({address:d},function(e,i){i==google.maps.GeocoderStatus.OK&&(s=e[0].geometry.location.lat(),l=e[0].geometry.location.lng()),setTimeout(function(){n.closest(".controls").find(".geo-lat .geo-input").val(s),n.closest(".controls").find(".geo-long .geo-input").val(l),i!=google.maps.GeocoderStatus.OK?t.confirm(n.data("oops"),{textOk:"Ok"}):n.prev(".address").val(""),o.fadeOut(100)},1500)})})}}(jQuery,window.themeblvd),function(e,t,i){"undefined"!=typeof wp&&void 0!==wp.media&&(t.options.mediaUploader={},t.options.mediaUploader.frames={},t.options.mediaUploader.init=function(i){var n=e(i),o=t.options.mediaUploader;n.find(".upload-button").off("click"),n.find(".remove-image, .remove-file").off("click"),n.find(".add-images").off("click"),n.find(".upload-button").on("click",function(t){t.preventDefault(),o.addFile(e(this).closest(".section-upload, .section-media"))}),n.find(".remove-image, .remove-file").on("click",function(t){t.preventDefault(),o.removeFile(e(this).closest(".section-upload, .section-media"))}),n.find(".add-images").on("click",function(t){t.preventDefault();var i=e(this);o.addImages(i,i.closest(".section-sortable"))})},t.options.mediaUploader.addFile=function(i){var n=t.options.mediaUploader,o=i.find("input.upload").attr("id");if(n.frames[o])n.frames[o].open();else{var a=null,d=i.find(".trigger").data("type"),s=i.find(".trigger").data("title"),l=i.find(".trigger").data("select"),c=i.find(".trigger").data("class"),r=i.find(".trigger").data("send-back"),f=i.find(".trigger").data("link"),u="image",p=!1,h="library";"video"===d&&(u="video"),"media"===d&&(u="",p=!0),"advanced"===d&&(h="themeblvd_advanced"),a=n.frames[o]=wp.media.frames.file_frame=wp.media({frame:"select",state:h,className:"media-frame "+c,title:s,library:{type:u},button:{text:l},multiple:p}),"advanced"===d&&a.states.add([new wp.media.controller.Library({id:"themeblvd_advanced",title:s,priority:20,toolbar:"select",filterable:"uploaded",library:wp.media.query(a.options.library),multiple:!1,editable:!0,displayUserSettings:!1,displaySettings:!0,allowLocalEdits:!0})]),a.on("select",function(){var t,o,s,l,c=a.state().get("selection").first(),u=i.find(".trigger").data("remove");"advanced"===d?(t=a.$el.find('.attachment-display-settings select[name="size"]').val(),o=c.attributes.sizes[t].url):o=c.attributes.url,"id"===r?i.find(".image-url").val(c.attributes.id):i.find(".image-url").val(o),"image"===c.attributes.type&&i.find(".screenshot").empty().hide().append('<img src="'+o+'"><a class="remove-image"></a>').slideDown("fast"),"logo"===d&&(i.find(".image-width").val(c.attributes.width),i.find(".image-height").val(c.attributes.height)),"video"===d&&i.find(".video-url").val(c.attributes.url),"slider"===d&&(i.find(".image-id").val(c.attributes.id),i.find(".image-title").val(c.attributes.title),(l=i.find(".image-title").val())&&i.closest(".widget").find(".slide-summary").text(l).fadeIn(200)),"video"!==d&&"media"!==d&&(i.find(".upload-button").unbind().addClass("remove-file").removeClass("upload-button").val(u),i.find(".of-background-properties").slideDown(),i.find(".remove-image, .remove-file").on("click",function(t){t.preventDefault(),n.removeFile(e(this).closest(".section-upload"))})),"advanced"===d&&(i.find(".image-id").val(c.attributes.id),i.find(".image-title").val(c.attributes.title),i.find(".image-crop").val(t),f&&"none"!==a.$el.find(".attachment-display-settings .link-to").val()&&(s=a.$el.find(".attachment-display-settings .link-to-custom").val(),i.closest(".advanced-image-upload").find(".receive-link-url input").val(s)))}),a.open(),"advanced"===d&&(a.$el.addClass("hide-menu"),a.$el.find(".attachment-display-settings label:first-of-type").remove(),f||a.$el.find(".attachment-display-settings div.setting").remove())}},t.options.mediaUploader.removeFile=function(i){var n=t.options.mediaUploader,o=i.find(".trigger").data("upload");"slider"===i.find(".trigger").data("type")&&i.closest(".widget").find(".slide-summary").removeClass("image video").hide().text(""),i.find(".remove-image").hide(),i.find(".upload").val(""),i.find(".of-background-properties").hide(),i.find(".screenshot").slideUp(),i.find(".remove-file").addClass("upload-button").removeClass("remove-file").val(o),i.find(".upload-button").on("click",function(t){t.preventDefault(),n.addFile(e(this).closest(".section-upload"))})},t.options.mediaUploader.addImages=function(i,n){var o=t.options.mediaUploader,a=i.attr("id");if(o.frames[a])o.frames[a].open();else{var d=o.frames[a]=wp.media.frames.file_frame=wp.media({frame:"select",className:"media-frame tb-modal-hide-settings",title:i.data("title"),library:{type:"image"},button:{text:i.data("button")},multiple:"add"});d.on("select update insert",function(i){var o,a,s=d.state(),l=0,c=[],r=n.find(".tb-sortable-option");(void 0!==i?i:s.get("selection")).map(function(e){o=e.toJSON(),c[l]={id:o.id,title:o.title},o.sizes.tb_thumb?c[l].preview=o.sizes.tb_thumb.url:c[l].preview=o.sizes.full.url,l++}),a={action:"themeblvd_add_"+r.data("type")+"_item",security:r.data("security"),data:{option_name:r.data("name"),option_id:r.data("id"),items:c}},e.post(ajaxurl,a,function(i){n.find(".item-container").append(i);var o=n.find(".item-container .item").slice(-c.length);o.addClass("add"),window.setTimeout(function(){o.removeClass("add")},500),n.find(".delete-sortable-items").fadeIn(200),o.find(".delete-sortable-item").on("click",function(i){i.preventDefault();var n=e(this),o=n.closest(".section-sortable"),a=n.closest(".item");t.confirm(n.attr("title"),{confirm:!0},function(e){e&&(a.addClass("delete"),window.setTimeout(function(){a.remove(),o.find(".item-container .item").length||o.find(".delete-sortable-items").fadeOut(200)},500))})}),o.find(".toggle").on("click",function(t){t.preventDefault();var i=e(this);i.closest(".item-handle").hasClass("closed")?(i.closest(".item-handle").removeClass("closed"),i.closest(".item").find(".item-content").show()):(i.closest(".item-handle").addClass("closed"),i.closest(".item").find(".item-content").hide())}),o.find(".item-handle h3").each(function(){var t=e(this),i=t.closest(".item").find(".handle-trigger");i.is("select")?t.closest(".item").find(".item-handle h3").text(i.find('option[value="'+i.val()+'"]').text()):t.closest(".item").find(".item-handle h3").text(i.val())}),o.find(".handle-trigger").on("change",function(){var t=e(this);t.is("select")?t.closest(".item").find(".item-handle h3").text(t.find('option[value="'+t.val()+'"]').text()):t.closest(".item").find(".item-handle h3").text(t.val())}),o.themeblvd("options","setup")})}),d.open()}})}(jQuery,window.themeblvd,themeblvdL10n),function(e,t,i){window.themeblvd.options.editor=function(t){e(t).find(".tb-textarea-editor-link").themeblvd("modal",null,{build:!1,padding:!0,height:"auto",onLoad:function(e){wpActiveEditor="themeblvd_editor";var t={},i={},n="",o="",a="undefined"!=typeof tinymce,d=e.$modalWindow;e.$element.is(".tb-block-editor-link")?(n=e.$element.closest(".block").data("field-name"),i=e.$element.closest(".block").find('textarea[name="'+n+'[content]"]')):i=e.$element.closest(".textarea-wrap").find("textarea"),o=i.val(),d.find(".wp-editor-area, iframe").height(300),d.find(".wp-editor-wrap").is(".tmce-active")?(a&&(t=tinymce.get("themeblvd_editor")),t&&(o=window.switchEditors.wpautop(o),t.setContent(o,{format:"raw"}))):d.find("textarea").val(o),i.css("overflow","hidden")},onSave:function(e){wpActiveEditor="content";var t={},i="",n="",o={},a="undefined"!=typeof tinymce,d=e.$modalWindow;e.$element.is(".tb-block-editor-link")?(n=e.$element.closest(".block").data("field-name"),o=e.$element.closest(".block").find('textarea[name="'+n+'[content]"]')):o=e.$element.closest(".textarea-wrap").find("textarea"),d.find(".wp-editor-wrap").is(".tmce-active")?(a&&(t=tinymce.get("themeblvd_editor")),t&&(i=t.getContent(),i=window.switchEditors.pre_wpautop(i))):i=d.find(".wp-editor-area").val(),o.val(i),o.css("overflow","visible")},onCancel:function(e){wpActiveEditor="content",e.$element.closest(".textarea-wrap").find("textarea").css("overflow","visible")}})}}(jQuery,0,themeblvdL10n),function(e,t,i){window.themeblvd.options.codeEditor=function(t){var i=e(t);i.find(".tb-textarea-code-link").themeblvd("modal",null,{codeEditor:!0,size:"medium",height:"auto"}),i.find(".section-code").each(function(){var t=e(this).find("textarea"),i=t.data("code-lang"),n="",o={};(o=t.data("CodeMirrorInstance"))||(n="html"==i?{name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]}:i,(o=CodeMirror.fromTextArea(document.getElementById(t.attr("id")),{mode:n,lineNumbers:!0,theme:"themeblvd",indentUnit:4,tabSize:4,indentWithTabs:!0})).on("blur",function(){t.val(o.getValue())}),t.data("CodeMirrorInstance",o))})}}(jQuery,0,themeblvdL10n),function(e,t,i){t.options.columnWidths={},t.options.columnWidths.init=function(i){$element=e(i),$element.find(".section-column_widths").each(function(){t.options.columnWidths.build(e(this).closest(".subgroup.columns"))})},t.options.columnWidths.build=function(i){var n=i.find(".slider").attr("id"),o=12,a=3,d=0,s="",l=i.find(".column-width-input").val(),c=[],r={};if(r={10:{2:{values:[0,5,10],display:["1/2","1/2"]},3:{values:[0,3,7,10],display:["3/10","2/5","3/10"]},4:{values:[0,2,5,8,10],display:["1/5","3/10","3/10","1/5"]},5:{values:[0,2,4,6,8,10],display:["1/5","1/5","1/5","1/5","1/5"]},6:{values:[0,1,3,5,7,9,10],display:["1/10","1/5","1/5","1/5","1/5","1/10"]}},12:{2:{values:[0,6,12],display:["1/2","1/2"]},3:{values:[0,4,8,12],display:["1/3","1/3","1/3"]},4:{values:[0,3,6,9,12],display:["1/4","1/4","1/4","1/4"]},5:{values:[0,2,4,8,10,12],display:["1/6","1/6","1/3","1/6","1/6"]},6:{values:[0,2,4,6,8,10,12],display:["1/6","1/6","1/6","1/6","1/6","1/6"]}}},o=i.find(".select-grid-system").val(),a=i.find(".select-col-num").val(),i.find(".select-col-num").off("change.ui-slider"),i.find(".select-col-num").on("change.ui-slider",t.options.columnWidths.change),i.find(".select-grid-system").off("change.ui-slider"),i.find(".select-grid-system").on("change.ui-slider",t.options.columnWidths.change),0!=a){if(1==a)return i.find(".slider").append('<div class="column-preview col-1" style="width:100%"><span class="text">100%</span></div>'),void i.find(".column-width-input").val("1/1").trigger("themeblvd-update-columns");if(l){l=l.split("-"),a=l.length;for(var f=0;f<=a;f++)0===f?c[f]=0:f==a?c[f]=o:(s=l[f-1].split("/"),d+=o*s[0]/s[1],c[f]=d)}else c=r[o][a].values,l=r[o][a].display,i.find(".column-width-input").val(l.join("-")).trigger("themeblvd-update-columns");e("#"+n).slider({range:"max",min:0,max:o,step:1,values:c,create:function(e,t){var n=0,d=0,s=0,r="";for(n=1;n<=a;n++)i.find(".slider").append('<div class="column-preview col-'+n+'"><span class="text">'+l[n-1]+"</span></div>"),s=(c[n]-c[n-1])/o*100,i.find(".col-"+n).css("width",s+"%"),n>1&&i.find(".col-"+n).css("left",d+"%"),d+=s;for(d=0,r='<div class="grid-display grid-'+o+'">',n=1;n<=o;n++)r+='<div class="grid-column grid-col-'+n+'"></div>';for(r+="</div>",i.find(".slider").append(r),n=1;n<=o;n++)d+=1/o*100,i.find(".grid-col-"+n).css("left",d+"%")},slide:function(n,d){var s=e(d.handle).index(),l=d.values,c=l.length;if(1==s||c==s)return!1;var r=e(d.handle).closest(".column-widths-wrap"),f=r.find(".column-width-input"),u=d.value,p=l[s],h=l[s-2],m=0,v=0,g="",b="",w=0,y=0,x="",k="",C=[],$=0,_=0;if(u<=h||u>=p)return!1;y=u-h,w=p-u,v=s-1,m=s,g=(g=t.options.columnWidths.reduceFraction(y,o))[0].toString()+"/"+g[1].toString(),b=(b=t.options.columnWidths.reduceFraction(w,o))[0].toString()+"/"+b[1].toString(),r.find('input[name="col['+v+']"]').val(g),r.find('input[name="col['+m+']"]').val(b),x=(x=f.val()).split("-");for(var D=1;D<=x.length;D++)k+=D==v?g:D==m?b:x[D-1],D!=x.length&&(k+="-");for(f.val(k).trigger("themeblvd-update-columns"),C=k.split("-"),D=1;D<=a;D++)_=(l[D]-l[D-1])/o*100,i.find(".col-"+D).css("width",_+"%"),i.find(".col-"+D+" .text").text(C[D-1]),D>1&&i.find(".col-"+D).css("left",$+"%"),$+=_}})}},t.options.columnWidths.change=function(){var i=e(this),n=e("#"+i.data("slider"));n.data("uiSlider")&&n.slider("destroy"),n.html("").closest(".column-widths-wrap").find(".column-width-input").val(""),t.options.columnWidths.build(i.closest(".subgroup.columns"))},t.options.columnWidths.reduceFraction=function(e,t){var i=function e(t,i){return i?e(i,t%i):t};return i=i(e,t),[e/i,t/i]}}(jQuery,window.themeblvd,themeblvdL10n),function(e,t,i){t.options.sortable={},t.options.sortable.init=function(i){e(i).find(".tb-sortable-option").each(function(){var i=e(this),n=i.closest(".section-sortable"),o=i.data("max");n.find(".item").each(function(){t.options.sortable.setupItem(e(this))}),i.find(".item-container .item").length&&i.find(".delete-sortable-items").show(),n.find(".item-container").sortable({handle:".item-handle"}),n.find(".add-item").off("click"),n.find(".add-item").on("click",function(a){a.preventDefault();var d=e(this),s=null,l={};l={action:"themeblvd-add-"+i.data("type")+"-item",security:i.data("security"),data:{option_name:i.data("name"),option_id:i.data("id")}},e.post(ajaxurl,l,function(e){n.find(".item-container").append(e),(s=n.find(".item").last()).addClass("add"),window.setTimeout(function(){s.removeClass("add")},500),n.find(".delete-sortable-items").fadeIn(200),t.options.sortable.setupItem(s),s.themeblvd("options","setup"),s.themeblvd("options","editor"),s.themeblvd("options","code-editor"),s.themeblvd("options","media-uploader"),o>0&&i.find(".item-container > .item").length>=o&&d.prop("disabled",!0)})}),n.find(".delete-sortable-items").off("click"),n.find(".delete-sortable-items").on("click",function(i){i.preventDefault();var n=e(this),o=n.closest(".tb-sortable-option"),a=o.find(".item");t.comfirm(n.attr("title"),{confirm:!0},function(e){e&&(a.addClass("delete"),window.setTimeout(function(){a.remove(),o.find(".delete-sortable-items").fadeOut(200),o.find(".add-item").prop("disabled",!1)},500))})})})},t.options.sortable.setupItem=function(i){i.find(".delete-sortable-item").off("click"),i.find(".delete-sortable-item").on("click",function(i){i.preventDefault();var n=e(this),o=n.closest(".section-sortable"),a=n.closest(".item"),d=n.closest(".tb-sortable-option").data("max");t.confirm(n.attr("title"),{confirm:!0},function(e){e&&(a.addClass("delete"),window.setTimeout(function(){a.remove(),o.find(".item-container .item").length||o.find(".delete-sortable-items").fadeOut(200),d>0&&o.find(".item-container > .item").length<d&&o.find(".add-item").prop("disabled",!1)},500))})}),i.find(".toggle").off("click"),i.find(".toggle").on("click",function(t){t.preventDefault();var i=e(this);i.closest(".item-handle").hasClass("closed")?(i.closest(".item-handle").removeClass("closed"),i.closest(".item").find(".item-content").show()):(i.closest(".item-handle").addClass("closed"),i.closest(".item").find(".item-content").hide())}),i.find(".item-handle h3").each(function(){var t=e(this),i=t.closest(".item").find(".handle-trigger");i.is("select")?t.closest(".item").find(".item-handle h3").text(i.find('option[value="'+i.val()+'"]').text()):t.closest(".item").find(".item-handle h3").text(i.val())}),i.find(".handle-trigger").off("change"),i.find(".handle-trigger").on("change",function(){var t=e(this);t.is("select")?t.closest(".item").find(".item-handle h3").text(t.find('option[value="'+t.val()+'"]').text()):t.closest(".item").find(".item-handle h3").text(t.val())})}}(jQuery,window.themeblvd,themeblvdL10n),jQuery(document).ready(function(e){e(".themeblvd-icon-browser").themeblvd("options","setup"),e(".themeblvd-icon-browser").themeblvd("options","bind"),e(".themeblvd-icon-browser .select-icon").on("click",function(t){t.preventDefault();var i=e(this),n=i.closest(".themeblvd-icon-browser"),o=i.data("icon");n.find(".select-icon").removeClass("selected"),i.addClass("selected"),n.find(".icon-selection").val(o),n.find(".media-toolbar-secondary").find(".fa, span, img").remove(),i.hasClass("select-image-icon")?n.find(".media-toolbar-secondary").append('<img src="'+i.find("img").attr("src")+'" /><span>'+o+"</span>"):n.find(".media-toolbar-secondary").append('<i class="fa fa-'+o+' fa-2x fa-fw"></i><span>'+o+"</span>")}),e(".themeblvd-texture-browser").themeblvd("options","setup"),e(".themeblvd-texture-browser").themeblvd("options","bind"),e.isFunction(e.fn.wpColorPicker)&&e("#texture-browser-perview-color").wpColorPicker({change:function(){e(".themeblvd-texture-browser .select-texture span").css("background-color",e("#texture-browser-perview-color").val())}}),e(".themeblvd-texture-browser .wp-color-result").attr("title","Temporary Preview Color"),e(".themeblvd-texture-browser .select-texture span").css("background-color",e("#texture-browser-perview-color").val()),e(".themeblvd-texture-browser .select-texture").on("click",function(t){t.preventDefault();var i=e(this);i.closest(".themeblvd-texture-browser").find(".select-texture").each(function(){e(this).removeClass("selected")}),i.addClass("selected"),i.closest(".themeblvd-texture-browser").find(".texture-selection").val(i.data("texture")),i.closest(".themeblvd-texture-browser").find(".current-texture").text(i.data("texture-name"))})});